<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Journal - TradingJournal Pro</title>
    <link rel="stylesheet" href="css/journal.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">
            <h2>ðŸ“Š Trading Journal</h2>
        </div>
        <div class="nav-links">
            <a href="dashboard.html" class="nav-link">Dashboard</a>
            <a href="signals.html" class="nav-link">Signals</a>
            <a href="journal.html" class="nav-link active">Journal</a>
            <a href="backtest.html" class="nav-link">Backtest</a>
        </div>
        <div class="nav-user">
            <span id="userWelcome">Welcome, Trader</span>
            <button id="logoutBtn" class="logout-btn">Logout</button>
        </div>
    </nav>

    <!-- Journal Container -->
    <div class="journal-container">
        <!-- Journal Header -->
        <div class="journal-header">
            <h1>Trade Journal</h1>
            <div class="journal-actions">
                <button id="addTradeBtn" class="add-trade-btn">
                    âž• Add Trade
                </button>
                <button id="exportBtn" class="export-btn">
                    ðŸ“¤ Export CSV
                </button>
                <div class="filter-controls">
                    <select id="timeFilter">
                        <option value="all">All Time</option>
                        <option value="today">Today</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                    </select>
                    <select id="pairFilter">
                        <option value="all">All Pairs</option>
                        <option value="EUR/USD">EUR/USD</option>
                        <option value="GBP/USD">GBP/USD</option>
                        <option value="USD/JPY">USD/JPY</option>
                        <option value="AUD/USD">AUD/USD</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Stats Summary -->
        <div class="stats-summary">
            <div class="summary-card">
                <div class="summary-icon">ðŸ“ˆ</div>
                <div class="summary-info">
                    <h3 id="totalTrades">0</h3>
                    <p>Total Trades</p>
                </div>
            </div>
            <div class="summary-card profit">
                <div class="summary-icon">ðŸ’°</div>
                <div class="summary-info">
                    <h3 id="totalProfit">$0.00</h3>
                    <p>Total Profit</p>
                </div>
            </div>
            <div class="summary-card">
                <div class="summary-icon">ðŸŽ¯</div>
                <div class="summary-info">
                    <h3 id="winRate">0%</h3>
                    <p>Win Rate</p>
                </div>
            </div>
            <div class="summary-card">
                <div class="summary-icon">ðŸ“‰</div>
                <div class="summary-info">
                    <h3 id="avgTrade">$0.00</h3>
                    <p>Avg. Trade</p>
                </div>
            </div>
        </div>

        <!-- Trades Table -->
        <div class="trades-section">
            <div class="section-header">
                <h3>Trade History</h3>
                <div class="table-controls">
                    <input type="text" id="searchTrades" placeholder="Search trades...">
                    <button id="clearFilters" class="clear-btn">Clear Filters</button>
                </div>
            </div>
            
            <div class="trades-table-container">
                <table class="trades-table" id="tradesTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Pair</th>
                            <th>Direction</th>
                            <th>Entry Price</th>
                            <th>Quantity</th>
                            <th>Exit Price</th>
                            <th>P&L</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tradesTableBody">
                        <!-- Trades will be loaded here -->
                    </tbody>
                </table>
            </div>
            
            <div class="no-trades" id="noTradesMessage" style="display: none;">
                <h3>No Trades Found</h3>
                <p>Start by adding your first trade to track your performance</p>
                <button onclick="journalPage.showAddTradeModal()" class="add-trade-btn">
                    âž• Add Your First Trade
                </button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Trade Modal -->
    <div id="tradeModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modalTitle">Add New Trade</h3>
            <form id="tradeForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="tradePair">Currency Pair *</label>
                        <select id="tradePair" required>
                            <option value="">Select pair</option>
                            <option value="EUR/USD">EUR/USD</option>
                            <option value="GBP/USD">GBP/USD</option>
                            <option value="USD/JPY">USD/JPY</option>
                            <option value="AUD/USD">AUD/USD</option>
                            <option value="USD/CAD">USD/CAD</option>
                            <option value="NZD/USD">NZD/USD</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tradeDirection">Direction *</label>
                        <select id="tradeDirection" required>
                            <option value="BUY">BUY</option>
                            <option value="SELL">SELL</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="entryPrice">Entry Price *</label>
                        <input type="number" id="entryPrice" step="0.00001" required>
                    </div>
                    <div class="form-group">
                        <label for="entryDate">Entry Date *</label>
                        <input type="datetime-local" id="entryDate" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="quantity">Quantity *</label>
                        <input type="number" id="quantity" value="1" min="0.01" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="tradeStatus">Status</label>
                        <select id="tradeStatus">
                            <option value="OPEN">OPEN</option>
                            <option value="CLOSED">CLOSED</option>
                        </select>
                    </div>
                </div>

                <div class="form-row" id="exitSection">
                    <div class="form-group">
                        <label for="exitPrice">Exit Price</label>
                        <input type="number" id="exitPrice" step="0.00001">
                    </div>
                    <div class="form-group">
                        <label for="exitDate">Exit Date</label>
                        <input type="datetime-local" id="exitDate">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="stopLoss">Stop Loss</label>
                        <input type="number" id="stopLoss" step="0.00001">
                    </div>
                    <div class="form-group">
                        <label for="takeProfit">Take Profit</label>
                        <input type="number" id="takeProfit" step="0.00001">
                    </div>
                </div>

                <div class="form-group">
                    <label for="tradeNotes">Notes</label>
                    <textarea id="tradeNotes" rows="3" placeholder="Add any trade notes..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="journalPage.closeModal()">Cancel</button>
                    <button type="submit" class="submit-btn">Save Trade</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/trading-engine.js"></script>
    <script src="js/journal.js"></script>
</body>
</html>
